Gooru 
==========

Application is powered by Express

In order to run the development version: 

Clone repository, checkout master branch

Install globally nodeJS.

Enter repository: cd gooru

Run "npm install"

Whenever everything successfully complete, run "grunt serve"

In your default browser you will see a new tab: "http://localhost:9000/

===========

In order to run the production version of app:

do all the above mentioned steps,

in CLI or on continuous deployment server run "grunt build"

deploy application and link your server by running "node app" inside of your server Installation

===========

Application is serving static build ready files from public folder

Static files are generated by a parallel repo in front-end as a result of "grunt build"

command in the respective repo

===========

In order to test application run "grunt test" command

<hr/>
//////////////////////////////////////////////////////
//// 		<b>Potential Scheme</b>
//////////////////////////////////////////////////////
<pre>
channel:{
	_id: randomID,
	isDeleted: false,
	title: 'Channel title',
	ownerId: 'opa',
	isPrivate: true,
	users: [
		{
			title: 'Channel's title for this user',
			joinDate: '12.10.1996',
			user: 'fagagasgaga'
		}
	],
	topicsId: ['awhofqfa7fh9a8w0f', '9ugawf8a8fgahwf0a8wfa']
}

user: {
	_id: randomID,
	isDeleted: false,
	name: 'Vlad',
	login: 'opa',
	passhordHash: '97yirhqjkhfojafo',
	passwordSalt: 'w0ahfihawf92hfqo',
	address: 'Saratov, Russia',
	profession: 'FE Developer',
	biography: 'Student',
	avatar: 'cool.png',
	channels: ['aojdnadl;', 'andonad;ad'],
	favoritePosts: ['wpanfonaflka','anbalfnansfpaf'],
	likedPosts: ['aljdnjalda','apjfja;faf']
}

topic: {
	_id: randomID,
	isDeleted: false,
	hashTag: '#cool',
	description: 'My cool topic',
	author: 'apndobadonad',
	date: '20.20.1000',
	childPosts: ['sgagasgsagag', 'gasljgoalska'],
}

post: {
	_id: randomID,
	isDeleted: false,
	test: 'My text',
	date: '11.04.2014',
	author: 'adnjpajjhad',
	childPosts: ['sgagasgsagag', 'gasljgoalska'],
	usersFavorite:['apndkjafbnaf', 'abfihaslnf;amf;'],
	usersLike: ['slafjpjaflmaf;', 'saoppfnalnflknasfp']
}
</pre>
//////////////////////////////////////////////////////
//// 				<b>Mongoose Scheme</b>
//////////////////////////////////////////////////////
<pre>
var Channel = new mongoose.Schema({
    title: {type: String, required: true},
    isPrivate: {type: Boolean, default: false},
    gooru: {type: types.ObjectId, ref: 'User', required: true},
    topics: [{type: types.ObjectId, ref: 'Topic'}],
    users: [{
        user: {type: types.ObjectId, ref: 'User'},
        title: String,
        joinDate: {type: Date, default: Date.now}
    }],
    isDeleted: {type: Boolean, default: false}
});

var Post = new mongoose.Schema({
    text: {type: String},
    date: Date,
    author: {type: types.ObjectId, ref: 'User'},
    usersLike: [{type: types.ObjectId, ref: 'User'}],
    usersFavorite: [{type: types.ObjectId, ref: 'User'}],
    childPosts: [{type: types.ObjectId, ref: 'Post'}],
    isDeleted: {type: Boolean, default: false}
});

var Topic = new mongoose.Schema({
    hashTag: {type: String},
    description: {type: String},
    date: Date,
    author: [{type: types.ObjectId, ref: 'User'}],
    childPosts: [{type: types.ObjectId, ref: 'Post'}],
    isDeleted: {type: Boolean, default: false}
});

var User = new mongoose.Schema({
    login: {type: String, required: true, unique: true},
    passwordHash: {type: String, required: true},
    passwordSalt: {type: String},
    avatar: {type: String},
    address: {type: String, required: true},
    name: {type: String},
    profession: {type: String},
    biography: {type: String},
    channels: [{type: types.ObjectId, ref: 'Channel'}],
    favoritePosts: [{type: types.ObjectId, ref: 'Post'}],
    likedPosts: [{type: types.ObjectId, ref: 'Post'}],
    isDeleted: {type: Boolean, default: false}
});
</pre>
//////////////////////////////////////////////////////
//// 					Queries				  	  ////
//////////////////////////////////////////////////////

/////////////////////User/////////////////////////////
'/api/users/bylogin/:login'
	GET
		Получения пользователя по username
		:login = username

'/api/users/likes/:id'
	GET
		Получение постов, которые пользователь лайкнул
		:id = Id пользователя

'/api/users/favorites/:id'
	GET
		Получение постов, которые пользователь добавил в избранное
		:id = Id пользователя

'/api/users/logout'
	GET
		Разлогинивание пользователя, выход из текущей сессии

'/api/users'
	GET
		Получение списка юзеров

'/api/users/channel'
	POST
		Добавление юзера в канал
	Параметры
		channelId
		userId
		channelTitle - как для пользователя будет называться канал (по умолчанию равен названию канала)


'/api/users/channel/remove'
	POST
		Удаление юзера из канала (только сам  юзер может себя удалить)
	Параметры
		channelId
		userId

'/api/users/login'
	POST
		Signin пользователя
	Параметры
		login, password

'/api/users/signup'
	POST
		Регистрация пользователя
	Параметры
		login
		password
		name
		address
		avatar
		profession
		biography

'/api/users/:id'
	PUT
		Редактирование пользователя
		:id - ID пользовтеля
	Параметры
		login ИЛИ
		name ИЛИ
		address ИЛИ
		avatar ИЛИ
		profession ИЛИ
		biography

'/api/users/:id'
	DELETE
		Удаление пользователя
		:id - ID пользователя

//////////////////Channel/////////////////////////
'/api/channels'
	GET
		Получеие вех каналов

'/api/channels/:id'
	GET
		Получение канала по ID
		:id - ID канала

'/api/channel/topics/:id'
	GET
		Получение топиков в канале
		:id - ID канала

'/api/channel/users/:id'
	GET
		Получение юзеров в канале
		:id - ID канала

'/api/channels'
	POST
		Добавление канала
	Параметры
		title
		isPrivate (необязательно поле)
		gooru (создатель канала)

'/api/channels/:id'
	DELETE
		Удаление канала
		:id - ID канала

//////////////////Topic/////////////////////////
'/api/topics'
	GET
		Получение всех топиков

'/api/topics/posts/:id'
	GET
		Получение всех постов в топике
		:id - ID топика

'/api/topics'
	POST
		Добавление топика
	Параметры
		hashTag (название)
		description
		author (id автора)

'/api/topics/:id'
	DELETE
		Удаление топика
		:id - ID топика

'/api/topics/posts'
	PUT
		Превращение поста в топика
	Параметры
		hashTag
		id (ID поста)
//////////////////Post/////////////////////////
'/api/posts/like/:id'
	GET
		Лайкнуть пост
		:id - Id поста

'/api/posts/favor/:id'
	GET
		Добавить пост в избранное
		:id - Id поста

'/api/posts'
	POST
		Добавить пост
	Параметры
		text
		authorId

'/api/posts/:id'
	DELETE
		Удалить пост
		:id - ID поста